"use strict";(self["webpackChunksanyue_imghub"]=self["webpackChunksanyue_imghub"]||[]).push([[388],{4318:function(){},3496:function(e,a,l){l.d(a,{A:function(){return C}});var t=l(6768),s=l(4232);const n={id:"themeMask"},i=["cx","cy","r"],d=["r"],o=["opacity"];function c(e,a,l,c,u,r){return(0,t.uX)(),(0,t.CE)("div",{id:"themeToggle",onClick:a[0]||(a[0]=(...e)=>r.handleToggleClick&&r.handleToggleClick(...e))},[((0,t.uX)(),(0,t.CE)("svg",{class:(0,s.C4)(["theme_toggle_svg",{dark:u.isDark}]),width:"1.3em",height:"1.3em",viewBox:"0 0 24 24",fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",stroke:"currentColor"},[(0,t.Lk)("mask",n,[a[1]||(a[1]=(0,t.Lk)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"},null,-1)),(0,t.Lk)("circle",{class:"theme_toggle_circle1",fill:"black",cx:u.isDark?"50%":"100%",cy:u.isDark?"23%":"0%",r:u.isDark?"9":"5"},null,8,i)]),(0,t.Lk)("circle",{class:"theme_toggle_circle2",cx:"12",cy:"12",r:u.isDark?"9":"5",mask:"url(#themeMask)"},null,8,d),(0,t.Lk)("g",{class:"theme_toggle_g",stroke:"currentColor",opacity:u.isDark?0:1},a[2]||(a[2]=[(0,t.Fv)('<line x1="12" y1="1" x2="12" y2="3" data-v-4c88bff4></line><line x1="12" y1="21" x2="12" y2="23" data-v-4c88bff4></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-4c88bff4></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-4c88bff4></line><line x1="1" y1="12" x2="3" y2="12" data-v-4c88bff4></line><line x1="21" y1="12" x2="23" y2="12" data-v-4c88bff4></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-4c88bff4></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-4c88bff4></line>',8)]),8,o)],2))])}var u={name:"ToggleDark",data(){return{isDark:this.$store.getters.useDarkMode}},methods:{handleToggleClick(){this.isDark=!this.isDark,this.$store.commit("setUseDarkMode",this.isDark),this.$store.commit("setCusDarkMode",!0)}}},r=l(1241);const h=(0,r.A)(u,[["render",c],["__scopeId","data-v-4c88bff4"]]);var m=h,b=l(9017);l(5331),l(6055),l(8830),l(3597);const g={class:"tabs"},f={class:"tabs-dropdown-link"};function p(e,a,l,n,i,d){const o=(0,t.g2)("font-awesome-icon"),c=b.c6,u=b.Iy,r=b.dW,h=m;return(0,t.uX)(),(0,t.CE)("div",g,[(0,t.Lk)("span",{class:"title",onClick:a[0]||(a[0]=(...e)=>d.refreshDashboard&&d.refreshDashboard(...e))},[(0,t.bF)(o,{icon:d.iconName,class:"fa-images"},null,8,["icon"]),(0,t.eW)(" "+(0,s.v_)(d.titleName),1)]),(0,t.bF)(r,{onCommand:d.handleTabClick,class:"tabs-dropdown",role:"navigation",onVisibleChange:d.handleDropdownVisible,"popper-class":"tabs-dropdown-popper"},{dropdown:(0,t.k6)((()=>[(0,t.bF)(u,null,{default:(0,t.k6)((()=>["dashboard"!==l.activeTab?((0,t.uX)(),(0,t.Wv)(c,{key:0,command:"dashboard"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{icon:"images",style:{"margin-right":"5px"}}),a[1]||(a[1]=(0,t.eW)(" Gallery "))])),_:1})):(0,t.Q3)("",!0),"customerConfig"!==l.activeTab?((0,t.uX)(),(0,t.Wv)(c,{key:1,command:"customerConfig"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{icon:"user-cog",style:{"margin-right":"5px"}}),a[2]||(a[2]=(0,t.eW)(" 用户管理 "))])),_:1})):(0,t.Q3)("",!0),"systemConfig"!==l.activeTab?((0,t.uX)(),(0,t.Wv)(c,{key:2,command:"systemConfig"},{default:(0,t.k6)((()=>[(0,t.bF)(o,{icon:"cogs",style:{"margin-right":"5px"}}),a[3]||(a[3]=(0,t.eW)(" 系统设置 "))])),_:1})):(0,t.Q3)("",!0),(0,t.bF)(c,{command:""},{default:(0,t.k6)((()=>[(0,t.bF)(o,{icon:"upload",style:{"margin-right":"5px"}}),a[4]||(a[4]=(0,t.eW)(" 上传页面 "))])),_:1})])),_:1})])),default:(0,t.k6)((()=>[(0,t.Lk)("span",f,[(0,t.bF)(o,{icon:"bars",class:"tabs-arrow"})])])),_:1},8,["onCommand","onVisibleChange"]),(0,t.bF)(h)])}l(4114);var k={name:"DashboardTabs",props:{activeTab:{type:String,default:"dashboard"}},components:{AdminToggleDark:m},computed:{titleName(){return"dashboard"===this.activeTab?"Gallery":"customerConfig"===this.activeTab?"用户管理":"systemConfig"===this.activeTab?"系统设置":"上传页面"},iconName(){return"dashboard"===this.activeTab?"images":"customerConfig"===this.activeTab?"user-cog":"systemConfig"===this.activeTab?"cogs":"upload"}},methods:{refreshDashboard(){location.reload()},handleTabClick(e){this.$router.push(`/${e}`)},handleDropdownVisible(e){const a=document.querySelector(".tabs-dropdown-link");e?a.classList.add("rotate-up"):a.classList.remove("rotate-up")}}};const v=(0,r.A)(k,[["render",p],["__scopeId","data-v-0de0fc64"]]);var C=v},3388:function(e,a,l){l.r(a),l.d(a,{default:function(){return oe}});var t=l(47),s=(l(5331),l(9648),l(2105)),n=(l(9092),l(2006)),i=(l(8642),l(3003),l(5558)),d=(l(456),l(6768));const o={class:"others-settings"},c={class:"first-settings"},u={class:"actions"};function r(e,a,l,r,h,m){const b=i.qi,g=n.xE,f=n.US,p=s.WK,k=t.S2;return(0,d.uX)(),(0,d.CE)("div",o,[(0,d.Lk)("div",c,[a[5]||(a[5]=(0,d.Lk)("h3",{class:"first-title"},"其他设置",-1)),a[6]||(a[6]=(0,d.Lk)("h4",{class:"second-title"},"远端遥测",-1)),(0,d.bF)(f,{model:h.settings.telemetry,"label-width":"120px"},{default:(0,d.k6)((()=>[(0,d.bF)(g,{label:"启用"},{default:(0,d.k6)((()=>[(0,d.bF)(b,{modelValue:h.settings.telemetry.enabled,"onUpdate:modelValue":a[0]||(a[0]=e=>h.settings.telemetry.enabled=e),disabled:h.settings.telemetry.fixed},null,8,["modelValue","disabled"])])),_:1})])),_:1},8,["model"]),a[7]||(a[7]=(0,d.Lk)("h4",{class:"second-title"},"随机图像API",-1)),(0,d.bF)(f,{model:h.settings.randomImageAPI,"label-width":"120px"},{default:(0,d.k6)((()=>[(0,d.bF)(g,{label:"启用"},{default:(0,d.k6)((()=>[(0,d.bF)(b,{modelValue:h.settings.randomImageAPI.enabled,"onUpdate:modelValue":a[1]||(a[1]=e=>h.settings.randomImageAPI.enabled=e),disabled:h.settings.randomImageAPI.fixed},null,8,["modelValue","disabled"])])),_:1})])),_:1},8,["model"]),a[8]||(a[8]=(0,d.Lk)("h4",{class:"second-title"},"CloudFlare API Token",-1)),(0,d.bF)(f,{model:h.settings.cloudflareApiToken,"label-width":"120px"},{default:(0,d.k6)((()=>[(0,d.bF)(g,{label:"区域ID"},{default:(0,d.k6)((()=>[(0,d.bF)(p,{modelValue:h.settings.cloudflareApiToken.CF_ZONE_ID,"onUpdate:modelValue":a[2]||(a[2]=e=>h.settings.cloudflareApiToken.CF_ZONE_ID=e),disabled:h.settings.cloudflareApiToken.fixed},null,8,["modelValue","disabled"])])),_:1}),(0,d.bF)(g,{label:"账户邮箱"},{default:(0,d.k6)((()=>[(0,d.bF)(p,{modelValue:h.settings.cloudflareApiToken.CF_EMAIL,"onUpdate:modelValue":a[3]||(a[3]=e=>h.settings.cloudflareApiToken.CF_EMAIL=e),disabled:h.settings.cloudflareApiToken.fixed},null,8,["modelValue","disabled"])])),_:1}),(0,d.bF)(g,{label:"API Key"},{default:(0,d.k6)((()=>[(0,d.bF)(p,{modelValue:h.settings.cloudflareApiToken.CF_API_KEY,"onUpdate:modelValue":a[4]||(a[4]=e=>h.settings.cloudflareApiToken.CF_API_KEY=e),disabled:h.settings.cloudflareApiToken.fixed},null,8,["modelValue","disabled"])])),_:1})])),_:1},8,["model"])]),(0,d.Lk)("div",u,[(0,d.bF)(k,{type:"primary",onClick:m.saveSettings,disabled:""},{default:(0,d.k6)((()=>a[9]||(a[9]=[(0,d.eW)("保存设置")]))),_:1},8,["onClick"])])])}l(4114);var h=l(782),m={data(){return{settings:{telemetry:{},randomImageAPI:{},cloudflareApiToken:{}}}},computed:{...(0,h.L8)(["credentials"])},methods:{async fetchWithAuth(e,a={}){this.credentials&&(a.headers={...a.headers,Authorization:`Basic ${this.credentials}`},a.credentials="include");const l=await fetch(e,a);if(401===l.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return l},saveSettings(){this.$message.success("设置已保存")}},mounted(){this.fetchWithAuth("/api/manage/sysConfig/others").then((e=>e.json())).then((e=>{this.settings=e}))}},b=l(1241);const g=(0,b.A)(m,[["render",r],["__scopeId","data-v-ea128004"]]);var f=g;const p={class:"page-settings"},k={class:"first-settings"},v={class:"actions"};function C(e,a,l,i,o,c){const u=s.WK,r=n.xE,h=n.US,m=t.S2;return(0,d.uX)(),(0,d.CE)("div",p,[(0,d.Lk)("div",k,[a[0]||(a[0]=(0,d.Lk)("h3",{class:"first-title"},"页面设置",-1)),(0,d.bF)(h,{model:o.settings,"label-width":"120px"},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(o.settings.config,((e,a)=>((0,d.uX)(),(0,d.Wv)(r,{key:a,label:e.label},{default:(0,d.k6)((()=>[(0,d.bF)(u,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1032,["label"])))),128))])),_:1},8,["model"])]),(0,d.Lk)("div",v,[(0,d.bF)(m,{type:"primary",onClick:c.saveSettings,disabled:""},{default:(0,d.k6)((()=>a[1]||(a[1]=[(0,d.eW)("保存设置")]))),_:1},8,["onClick"])])])}var F={data(){return{settings:{config:[]}}},computed:{...(0,h.L8)(["credentials"])},methods:{async fetchWithAuth(e,a={}){this.credentials&&(a.headers={...a.headers,Authorization:`Basic ${this.credentials}`},a.credentials="include");const l=await fetch(e,a);if(401===l.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return l},saveSettings(){this.$message.success("设置已保存")}},mounted(){this.fetchWithAuth("/api/manage/sysConfig/page").then((e=>e.json())).then((e=>{this.settings=e}))}};const y=(0,b.A)(F,[["render",C],["__scopeId","data-v-a2ffcfb0"]]);var V=y;const _={class:"security-settings"},S={class:"first-settings"},x={class:"first-settings"},w={class:"first-settings"},L={class:"actions"};function U(e,a,l,o,c,u){const r=s.WK,h=n.xE,m=n.US,b=i.qi,g=t.S2;return(0,d.uX)(),(0,d.CE)("div",_,[(0,d.Lk)("div",S,[a[7]||(a[7]=(0,d.Lk)("h3",{class:"first-title"},"认证管理",-1)),a[8]||(a[8]=(0,d.Lk)("h4",{class:"second-title"},"用户端认证",-1)),(0,d.bF)(m,{model:c.authSettings.user,"label-width":"120px"},{default:(0,d.k6)((()=>[(0,d.bF)(h,{label:"上传密码"},{default:(0,d.k6)((()=>[(0,d.bF)(r,{modelValue:c.authSettings.user.authCode,"onUpdate:modelValue":a[0]||(a[0]=e=>c.authSettings.user.authCode=e),disabled:!0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),a[9]||(a[9]=(0,d.Lk)("h4",{class:"second-title"},"管理端认证",-1)),(0,d.bF)(m,{model:c.authSettings.admin,"label-width":"120px"},{default:(0,d.k6)((()=>[(0,d.bF)(h,{label:"用户名"},{default:(0,d.k6)((()=>[(0,d.bF)(r,{modelValue:c.authSettings.admin.adminUsername,"onUpdate:modelValue":a[1]||(a[1]=e=>c.authSettings.admin.adminUsername=e),disabled:!0},null,8,["modelValue"])])),_:1}),(0,d.bF)(h,{label:"密码"},{default:(0,d.k6)((()=>[(0,d.bF)(r,{modelValue:c.authSettings.admin.adminPassword,"onUpdate:modelValue":a[2]||(a[2]=e=>c.authSettings.admin.adminPassword=e),disabled:!0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])]),(0,d.Lk)("div",x,[a[10]||(a[10]=(0,d.Lk)("h3",{class:"first-title"},"上传管理",-1)),a[11]||(a[11]=(0,d.Lk)("h4",{class:"second-title"},"图像审查",-1)),(0,d.bF)(m,{model:c.uploadSettings.moderate,"label-width":"120px"},{default:(0,d.k6)((()=>[(0,d.bF)(h,{label:"审查渠道"},{default:(0,d.k6)((()=>[(0,d.bF)(r,{modelValue:c.uploadSettings.moderate.channel,"onUpdate:modelValue":a[3]||(a[3]=e=>c.uploadSettings.moderate.channel=e),disabled:!0},null,8,["modelValue"])])),_:1}),(0,d.bF)(h,{label:"API Key"},{default:(0,d.k6)((()=>[(0,d.bF)(r,{modelValue:c.uploadSettings.moderate.apiKey,"onUpdate:modelValue":a[4]||(a[4]=e=>c.uploadSettings.moderate.apiKey=e),disabled:!0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])]),(0,d.Lk)("div",w,[a[12]||(a[12]=(0,d.Lk)("h3",{class:"first-title"},"访问管理",-1)),a[13]||(a[13]=(0,d.Lk)("h4",{class:"second-title"},"域名过滤",-1)),(0,d.bF)(m,{model:c.accessSettings,"label-width":"120px"},{default:(0,d.k6)((()=>[(0,d.bF)(h,{label:"放行域名"},{default:(0,d.k6)((()=>[(0,d.bF)(r,{modelValue:c.accessSettings.allowedDomains,"onUpdate:modelValue":a[5]||(a[5]=e=>c.accessSettings.allowedDomains=e),disabled:!0},null,8,["modelValue"])])),_:1}),(0,d.bF)(h,{label:"白名单模式"},{default:(0,d.k6)((()=>[(0,d.bF)(b,{modelValue:c.accessSettings.whiteListMode,"onUpdate:modelValue":a[6]||(a[6]=e=>c.accessSettings.whiteListMode=e),disabled:!0},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])]),(0,d.Lk)("div",L,[(0,d.bF)(g,{type:"primary",onClick:u.saveSettings,disabled:""},{default:(0,d.k6)((()=>a[14]||(a[14]=[(0,d.eW)("保存设置")]))),_:1},8,["onClick"])])])}var I={data(){return{authSettings:{user:{},admin:{}},uploadSettings:{moderate:{}},accessSettings:{}}},computed:{...(0,h.L8)(["credentials"])},methods:{async fetchWithAuth(e,a={}){this.credentials&&(a.headers={...a.headers,Authorization:`Basic ${this.credentials}`},a.credentials="include");const l=await fetch(e,a);if(401===l.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return l},saveSettings(){this.$message.success("设置已保存")}},mounted(){this.fetchWithAuth("/api/manage/sysConfig/security").then((e=>e.json())).then((e=>{this.authSettings=e.auth,this.uploadSettings=e.upload,this.accessSettings=e.access}))}};const A=(0,b.A)(I,[["render",U],["__scopeId","data-v-b5b993e0"]]);var T=A,W=l(6810),E=(l(4396),l(4885),l(4232));const $={class:"upload-settings"},D={class:"upload-channel"},X={class:"channel-settings"},K={class:"second-title"},P={key:0},B={key:1},z={key:2},M={class:"actions"};function N(e,a,l,o,c,u){const r=W.ll,h=W.MQ,m=i.qi,b=n.xE,g=n.US,f=s.WK,p=(0,d.g2)("font-awesome-icon"),k=t.S2;return(0,d.uX)(),(0,d.CE)("div",$,[(0,d.Lk)("div",D,[a[3]||(a[3]=(0,d.Lk)("h3",{class:"first-title"},"上传渠道",-1)),(0,d.bF)(h,{modelValue:c.activeChannel,"onUpdate:modelValue":a[0]||(a[0]=e=>c.activeChannel=e)},{default:(0,d.k6)((()=>[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(c.channels,(e=>((0,d.uX)(),(0,d.Wv)(r,{key:e.value,label:e.value},{default:(0,d.k6)((()=>[(0,d.eW)((0,E.v_)(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]),(0,d.Lk)("div",X,[(0,d.Lk)("h4",K,(0,E.v_)(u.activeChannelLabel)+" 设置",1),"telegram"===c.activeChannel?((0,d.uX)(),(0,d.CE)("div",P,[(0,d.bF)(g,{model:c.telegramSettings,"label-width":"120px",class:"channel-form"},{default:(0,d.k6)((()=>[(0,d.bF)(b,{label:"负载均衡"},{default:(0,d.k6)((()=>[(0,d.bF)(m,{modelValue:c.telegramSettings.loadBalance.enabled,"onUpdate:modelValue":a[1]||(a[1]=e=>c.telegramSettings.loadBalance.enabled=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(c.telegramSettings.channels,((e,a)=>((0,d.uX)(),(0,d.Wv)(g,{key:a,model:e,"label-width":"120px",class:"channel-form"},{default:(0,d.k6)((()=>[(0,d.bF)(b,{label:"渠道名"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"是否启用"},{default:(0,d.k6)((()=>[(0,d.bF)(m,{modelValue:e.enabled,"onUpdate:modelValue":a=>e.enabled=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"Bot Token"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.botToken,"onUpdate:modelValue":a=>e.botToken=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"Chat ID"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.chatId,"onUpdate:modelValue":a=>e.chatId=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,null,{default:(0,d.k6)((()=>[(0,d.bF)(k,{type:"danger",onClick:e=>u.deleteChannel(a),size:"small",disabled:e.fixed},{default:(0,d.k6)((()=>[(0,d.bF)(p,{icon:"trash-alt"})])),_:2},1032,["onClick","disabled"])])),_:2},1024)])),_:2},1032,["model"])))),128))])):(0,d.Q3)("",!0),"cfr2"===c.activeChannel?((0,d.uX)(),(0,d.CE)("div",B,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(c.cfr2Settings.channels,((e,a)=>((0,d.uX)(),(0,d.Wv)(g,{model:e,"label-width":"120px",class:"channel-form"},{default:(0,d.k6)((()=>[(0,d.bF)(b,{label:"渠道名"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"是否启用"},{default:(0,d.k6)((()=>[(0,d.bF)(m,{modelValue:e.enabled,"onUpdate:modelValue":a=>e.enabled=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024)])),_:2},1032,["model"])))),256))])):(0,d.Q3)("",!0),"s3"===c.activeChannel?((0,d.uX)(),(0,d.CE)("div",z,[(0,d.bF)(g,{model:c.s3Settings,"label-width":"120px",class:"channel-form"},{default:(0,d.k6)((()=>[(0,d.bF)(b,{label:"负载均衡"},{default:(0,d.k6)((()=>[(0,d.bF)(m,{modelValue:c.s3Settings.loadBalance.enabled,"onUpdate:modelValue":a[2]||(a[2]=e=>c.s3Settings.loadBalance.enabled=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(c.s3Settings.channels,((e,a)=>((0,d.uX)(),(0,d.Wv)(g,{model:e,"label-width":"120px",class:"channel-form"},{default:(0,d.k6)((()=>[(0,d.bF)(b,{label:"渠道名"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.name,"onUpdate:modelValue":a=>e.name=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"是否启用"},{default:(0,d.k6)((()=>[(0,d.bF)(m,{modelValue:e.enabled,"onUpdate:modelValue":a=>e.enabled=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"Endpoint"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.endpoint,"onUpdate:modelValue":a=>e.endpoint=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"Bucket Name"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.bucketName,"onUpdate:modelValue":a=>e.bucketName=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"Region"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.region,"onUpdate:modelValue":a=>e.region=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"Key Id"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.accessKeyId,"onUpdate:modelValue":a=>e.accessKeyId=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,{label:"Secret Key"},{default:(0,d.k6)((()=>[(0,d.bF)(f,{modelValue:e.secretAccessKey,"onUpdate:modelValue":a=>e.secretAccessKey=a,disabled:e.fixed},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:2},1024),(0,d.bF)(b,null,{default:(0,d.k6)((()=>[(0,d.bF)(k,{type:"danger",onClick:e=>u.deleteChannel(a),size:"small",disabled:e.fixed},{default:(0,d.k6)((()=>[(0,d.bF)(p,{icon:"trash-alt"})])),_:2},1032,["onClick","disabled"])])),_:2},1024)])),_:2},1032,["model"])))),256))])):(0,d.Q3)("",!0)]),(0,d.Lk)("div",M,[(0,d.bF)(k,{type:"primary",onClick:u.addChannel},{default:(0,d.k6)((()=>[(0,d.bF)(p,{icon:"plus"})])),_:1},8,["onClick"]),(0,d.bF)(k,{type:"primary",onClick:u.saveSettings},{default:(0,d.k6)((()=>a[4]||(a[4]=[(0,d.eW)("保存设置")]))),_:1},8,["onClick"])])])}var j={data(){return{channels:[{value:"telegram",label:"Telegram"},{value:"cfr2",label:"CloudFlareR2"},{value:"s3",label:"S3"}],activeChannel:"telegram",telegramSettings:{loadBalance:{},channels:[]},cfr2Settings:{channels:[]},s3Settings:{loadBalance:{},channels:[]}}},computed:{...(0,h.L8)(["credentials"]),activeChannelLabel(){const e=this.channels.find((e=>e.value===this.activeChannel));return e?e.label:""}},methods:{async fetchWithAuth(e,a={}){this.credentials&&(a.headers={...a.headers,Authorization:`Basic ${this.credentials}`},a.credentials="include");const l=await fetch(e,a);if(401===l.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return l},addChannel(){switch(this.activeChannel){case"telegram":this.telegramSettings.channels.push({id:this.telegramSettings.channels.length+1,name:"",type:"telegram",savePath:"database",botToken:"",chatId:"",enabled:!0,fixed:!1});break;case"cfr2":this.$message.error("暂不支持增加 R2渠道 配置");break;case"s3":this.s3Settings.channels.push({id:this.s3Settings.channels.length+1,name:"",type:"s3",savePath:"database",accessKeyId:"",secretAccessKey:"",region:"",bucketName:"",endpoint:"",enabled:!0,fixed:!1});break}},deleteChannel(e){switch(this.activeChannel){case"telegram":this.telegramSettings.channels.forEach(((a,l)=>{l>e&&(a.id-=1)})),this.telegramSettings.channels.splice(e,1);break;case"cfr2":this.cfr2Settings.channels.forEach(((a,l)=>{l>e&&(a.id-=1)})),this.cfr2Settings.channels.splice(e,1);break;case"s3":this.s3Settings.channels.forEach(((a,l)=>{l>e&&(a.id-=1)})),this.s3Settings.channels.splice(e,1);break}},saveSettings(){const e={telegram:this.telegramSettings,cfr2:this.cfr2Settings,s3:this.s3Settings};this.fetchWithAuth("/api/manage/sysConfig/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),this.$message.success("设置已保存")}},mounted(){this.fetchWithAuth("/api/manage/sysConfig/upload").then((e=>e.json())).then((e=>{this.telegramSettings=e.telegram,this.cfr2Settings=e.cfr2,this.s3Settings=e.s3}))}};const Q=(0,b.A)(j,[["render",N],["__scopeId","data-v-549310f0"]]);var O=Q,q=l(4182);l(213);const R={class:"sidebar-container"};function Z(e,a,l,t,s,n){const i=(0,d.g2)("font-awesome-icon"),o=q.ct,c=q.lj;return(0,d.uX)(),(0,d.CE)("div",R,[(0,d.bF)(c,{"default-active":l.activeIndex,class:"el-menu-vertical",collapse:s.isCollapse,onSelect:n.handleSelect},{default:(0,d.k6)((()=>[(0,d.bF)(o,{index:"upload",class:"menu-item"},{default:(0,d.k6)((()=>[(0,d.bF)(i,{icon:"cloud-upload"}),a[1]||(a[1]=(0,d.Lk)("span",{slot:"title"},"上传设置",-1))])),_:1}),(0,d.bF)(o,{index:"security",class:"menu-item"},{default:(0,d.k6)((()=>[(0,d.bF)(i,{icon:"shield"}),a[2]||(a[2]=(0,d.Lk)("span",{slot:"title"},"安全设置",-1))])),_:1}),(0,d.bF)(o,{index:"page",class:"menu-item"},{default:(0,d.k6)((()=>[(0,d.bF)(i,{icon:"pager"}),a[3]||(a[3]=(0,d.Lk)("span",{slot:"title"},"页面设置",-1))])),_:1}),(0,d.bF)(o,{index:"others",class:"menu-item"},{default:(0,d.k6)((()=>[(0,d.bF)(i,{icon:"cog"}),a[4]||(a[4]=(0,d.Lk)("span",{slot:"title"},"其他设置",-1))])),_:1})])),_:1},8,["default-active","collapse","onSelect"]),(0,d.Lk)("div",{class:"toggle-button",onClick:a[0]||(a[0]=(...e)=>n.toggleCollapse&&n.toggleCollapse(...e))},[(0,d.bF)(i,{icon:s.isCollapse?"angle-double-right":"angle-double-left"},null,8,["icon"])])])}var G={name:"SysConfigTabs",props:{activeIndex:{type:String,default:"upload"},isCollapse:{type:Boolean,default:!1}},data(){return{isCollapse:!1}},methods:{toggleCollapse(){this.isCollapse=!this.isCollapse,this.$emit("update:isCollapse",this.isCollapse)},checkMobile(){const e=window.innerWidth<=768;this.isCollapse=e,this.$emit("update:isCollapse",this.isCollapse)},handleSelect(e){this.$emit("update:activeIndex",e)}},mounted(){this.checkMobile(),window.addEventListener("resize",this.checkMobile)},beforeDestroy(){window.removeEventListener("resize",this.checkMobile)}};const Y=(0,b.A)(G,[["render",Z],["__scopeId","data-v-1ec6cdc8"]]);var J=Y,H=l(4880),ee=(l(7128),l(1450)),ae=l(3496);const le={class:"container"},te={class:"header-content"},se={class:"header-action"};function ne(e,a,l,t,s,n){const i=ae.A,o=(0,d.g2)("font-awesome-icon"),c=ee.R7,u=H.bZ,r=J,h=O,m=T,b=V,g=f;return(0,d.uX)(),(0,d.CE)("div",le,[(0,d.bF)(u,null,{default:(0,d.k6)((()=>[(0,d.Lk)("div",te,[(0,d.bF)(i,{activeTab:"systemConfig"}),(0,d.Lk)("div",se,[(0,d.bF)(c,{disabled:n.disableTooltip,content:"退出登录",placement:"bottom"},{default:(0,d.k6)((()=>[(0,d.bF)(o,{icon:"sign-out-alt",class:"header-icon",onClick:n.handleLogout},null,8,["onClick"])])),_:1},8,["disabled"])])])])),_:1}),(0,d.bF)(r,{activeIndex:s.activeIndex,"onUpdate:activeIndex":a[0]||(a[0]=e=>s.activeIndex=e),isCollapse:s.isSidebarCollapse,"onUpdate:isCollapse":a[1]||(a[1]=e=>s.isSidebarCollapse=e)},null,8,["activeIndex","isCollapse"]),"upload"===s.activeIndex?((0,d.uX)(),(0,d.Wv)(h,{key:0,class:(0,E.C4)(["main-container",{collapsed:s.isSidebarCollapse}])},null,8,["class"])):"security"===s.activeIndex?((0,d.uX)(),(0,d.Wv)(m,{key:1,class:(0,E.C4)(["main-container",{collapsed:s.isSidebarCollapse}])},null,8,["class"])):"page"===s.activeIndex?((0,d.uX)(),(0,d.Wv)(b,{key:2,class:(0,E.C4)(["main-container",{collapsed:s.isSidebarCollapse}])},null,8,["class"])):((0,d.uX)(),(0,d.Wv)(g,{key:3,class:(0,E.C4)(["main-container",{collapsed:s.isSidebarCollapse}])},null,8,["class"]))])}var ie={name:"SystemConfig",data(){return{activeIndex:"upload",isSidebarCollapse:!1}},watch:{},components:{DashboardTabs:ae.A,SysConfigTabs:J,SysCogUpload:O,SysCogSecurity:T,SysCogPage:V,SysCogOthers:f},computed:{...(0,h.L8)(["credentials"]),disableTooltip(){return window.innerWidth<768}},methods:{async fetchWithAuth(e,a={}){this.credentials&&(a.headers={...a.headers,Authorization:`Basic ${this.credentials}`},a.credentials="include");const l=await fetch(e,a);if(401===l.status)throw this.$message.error("认证状态错误，请重新登录"),this.$router.push("/adminLogin"),new Error("Unauthorized");return l},handleLogout(){this.$store.commit("setCredentials",null),this.$router.push("/adminLogin")}}};const de=(0,b.A)(ie,[["render",ne],["__scopeId","data-v-7fa691ea"]]);var oe=de},8050:function(e,a,l){l(5331)},3597:function(e,a,l){l(5331)},8830:function(e,a,l){l(5331)},6055:function(e,a,l){l(5331),l(9648),l(8050),l(9104),l(5970)},3003:function(e,a,l){l(5331)},8642:function(e,a,l){l(5331)},7128:function(e,a,l){l(5331),l(4318)},9104:function(e,a,l){l(5331)},4396:function(e,a,l){l(5331)},4885:function(e,a,l){l(5331)},5970:function(e,a,l){l(5331)},456:function(e,a,l){l(5331)},213:function(e,a,l){l(5331),l(9104)}}]);
//# sourceMappingURL=388.8001c0c4.js.map